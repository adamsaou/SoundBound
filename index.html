<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SoundBound - Enhanced MP3 Player</title>
  <link rel="stylesheet" href="src/styles/main.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
  <div class="app-container">
    <!-- Header -->
    <header class="app-header">
      <div class="header-content">
        <h1 class="app-title">
          <span class="logo-icon">ðŸŽµ</span>
          SoundBound
        </h1>
        <div class="header-controls">
          <button class="style-btn" id="styleBtn" aria-label="Customize Style">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="3"/>
              <path d="M12 1v6m0 6v6m11-7h-6m-6 0H1"/>
            </svg>
          </button>
          <button class="user-btn" id="userBtn" aria-label="User Account">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
              <circle cx="12" cy="7" r="4"/>
            </svg>
          </button>
        </div>
      </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
      <!-- Playlist Section -->
      <section class="playlist-section">
        <div class="section-header">
          <h2>Playlist</h2>
          <div class="playlist-controls">
            <input type="file" id="fileInput" accept="audio/*" multiple style="display: none;">
            <button class="add-music-btn" id="addMusicBtn">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="12" y1="5" x2="12" y2="19"/>
                <line x1="5" y1="12" x2="19" y2="12"/>
              </svg>
              Add Music
            </button>
            <input type="text" class="search-input" id="searchInput" placeholder="Search songs...">
          </div>
        </div>
        <div class="playlist-container">
          <div class="playlist" id="playlist">
            <!-- Playlist items will be dynamically added here -->
          </div>
        </div>
      </section>

      <!-- Player Section -->
      <section class="player-section">
        <div class="player-container">
          <div class="now-playing">
            <div class="album-art">
              <div class="album-placeholder">
                <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                  <circle cx="12" cy="12" r="10"/>
                  <circle cx="12" cy="12" r="3"/>
                </svg>
              </div>
            </div>
            <div class="track-info">
              <h3 class="track-title" id="trackTitle">No track selected</h3>
              <p class="track-artist" id="trackArtist">Select a song to play</p>
            </div>
          </div>

          <div class="player-controls">
            <button class="control-btn" id="prevBtn" aria-label="Previous">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polygon points="19,20 9,12 19,4"/>
                <line x1="5" y1="19" x2="5" y2="5"/>
              </svg>
            </button>
            <button class="play-btn" id="playBtn" aria-label="Play">
              <svg class="play-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polygon points="5,3 19,12 5,21"/>
              </svg>
              <svg class="pause-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display: none;">
                <rect x="6" y="4" width="4" height="16"/>
                <rect x="14" y="4" width="4" height="16"/>
              </svg>
            </button>
            <button class="control-btn" id="nextBtn" aria-label="Next">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polygon points="5,4 15,12 5,20"/>
                <line x1="19" y1="5" x2="19" y2="19"/>
              </svg>
            </button>
          </div>

          <div class="progress-section">
            <span class="time-display" id="currentTime">0:00</span>
            <div class="progress-container">
              <div class="progress-bar" id="progressBar">
                <div class="progress-fill" id="progressFill"></div>
                <div class="progress-handle" id="progressHandle"></div>
              </div>
            </div>
            <span class="time-display" id="duration">0:00</span>
          </div>

          <div class="volume-section">
            <button class="volume-btn" id="volumeBtn" aria-label="Volume">
              <svg class="volume-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polygon points="11,5 6,9 2,9 2,15 6,15 11,19"/>
                <path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"/>
              </svg>
            </button>
            <div class="volume-container">
              <div class="volume-bar" id="volumeBar">
                <div class="volume-fill" id="volumeFill"></div>
                <div class="volume-handle" id="volumeHandle"></div>
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>

    <!-- Style Customization Modal -->
    <div class="modal-overlay" id="styleModal">
      <div class="modal-content">
        <div class="modal-header">
          <h2>Customize Style</h2>
          <button class="close-btn" id="closeStyleModal" aria-label="Close">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="18" y1="6" x2="6" y2="18"/>
              <line x1="6" y1="6" x2="18" y2="18"/>
            </svg>
          </button>
        </div>
        <div class="modal-body">
          <div class="customization-section">
            <h3>Color Theme</h3>
            <div class="theme-options">
              <button class="theme-option" data-theme="default">
                <div class="theme-preview">
                  <div class="theme-color" style="background: #6366f1;"></div>
                  <div class="theme-color" style="background: #8b5cf6;"></div>
                  <div class="theme-color" style="background: #06b6d4;"></div>
                </div>
                <span>Default</span>
              </button>
              <button class="theme-option" data-theme="sunset">
                <div class="theme-preview">
                  <div class="theme-color" style="background: #f97316;"></div>
                  <div class="theme-color" style="background: #ef4444;"></div>
                  <div class="theme-color" style="background: #eab308;"></div>
                </div>
                <span>Sunset</span>
              </button>
              <button class="theme-option" data-theme="forest">
                <div class="theme-preview">
                  <div class="theme-color" style="background: #059669;"></div>
                  <div class="theme-color" style="background: #0d9488;"></div>
                  <div class="theme-color" style="background: #65a30d;"></div>
                </div>
                <span>Forest</span>
              </button>
              <button class="theme-option" data-theme="ocean">
                <div class="theme-preview">
                  <div class="theme-color" style="background: #0ea5e9;"></div>
                  <div class="theme-color" style="background: #3b82f6;"></div>
                  <div class="theme-color" style="background: #1e40af;"></div>
                </div>
                <span>Ocean</span>
              </button>
              <button class="theme-option" data-theme="midnight">
                <div class="theme-preview">
                  <div class="theme-color" style="background: #1f2937;"></div>
                  <div class="theme-color" style="background: #374151;"></div>
                  <div class="theme-color" style="background: #6b7280;"></div>
                </div>
                <span>Midnight</span>
              </button>
            </div>
          </div>

          <div class="customization-section">
            <h3>Player Size</h3>
            <div class="size-options">
              <label class="radio-option">
                <input type="radio" name="playerSize" value="compact">
                <span class="radio-label">Compact</span>
              </label>
              <label class="radio-option">
                <input type="radio" name="playerSize" value="normal" checked>
                <span class="radio-label">Normal</span>
              </label>
              <label class="radio-option">
                <input type="radio" name="playerSize" value="large">
                <span class="radio-label">Large</span>
              </label>
            </div>
          </div>

          <div class="customization-section">
            <h3>Background Style</h3>
            <div class="background-options">
              <label class="radio-option">
                <input type="radio" name="background" value="solid" checked>
                <span class="radio-label">Solid Color</span>
              </label>
              <label class="radio-option">
                <input type="radio" name="background" value="gradient">
                <span class="radio-label">Gradient</span>
              </label>
              <label class="radio-option">
                <input type="radio" name="background" value="pattern">
                <span class="radio-label">Pattern</span>
              </label>
            </div>
          </div>

          <div class="customization-section">
            <h3>Font Size</h3>
            <div class="slider-container">
              <input type="range" id="fontSizeSlider" min="12" max="20" value="16" class="slider">
              <span class="slider-value" id="fontSizeValue">16px</span>
            </div>
          </div>

          <div class="customization-section">
            <h3>Animation Speed</h3>
            <div class="slider-container">
              <input type="range" id="animationSpeedSlider" min="0.5" max="2" step="0.1" value="1" class="slider">
              <span class="slider-value" id="animationSpeedValue">1x</span>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button class="reset-btn" id="resetStyleBtn">Reset to Default</button>
          <button class="save-btn" id="saveStyleBtn">Save Changes</button>
        </div>
      </div>
    </div>

    <!-- User Authentication Modal -->
    <div class="modal-overlay" id="userModal">
      <div class="modal-content">
        <div class="modal-header">
          <h2>User Account</h2>
          <button class="close-btn" id="closeUserModal" aria-label="Close">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="18" y1="6" x2="6" y2="18"/>
              <line x1="6" y1="6" x2="18" y2="18"/>
            </svg>
          </button>
        </div>
        <div class="modal-body">
          <div class="auth-container" id="authContainer">
            <div class="auth-form" id="loginForm">
              <h3>Sign In</h3>
              <input type="email" id="loginEmail" placeholder="Email" class="auth-input">
              <input type="password" id="loginPassword" placeholder="Password" class="auth-input">
              <button class="auth-btn" id="loginBtn">Sign In</button>
              <p class="auth-switch">Don't have an account? <button class="link-btn" id="showSignup">Sign up</button></p>
            </div>
            <div class="auth-form" id="signupForm" style="display: none;">
              <h3>Create Account</h3>
              <input type="email" id="signupEmail" placeholder="Email" class="auth-input">
              <input type="password" id="signupPassword" placeholder="Password" class="auth-input">
              <button class="auth-btn" id="signupBtn">Create Account</button>
              <p class="auth-switch">Already have an account? <button class="link-btn" id="showLogin">Sign in</button></p>
            </div>
            <div class="user-profile" id="userProfile" style="display: none;">
              <div class="profile-info">
                <div class="profile-avatar">
                  <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                    <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                    <circle cx="12" cy="7" r="4"/>
                  </svg>
                </div>
                <div class="profile-details">
                  <h3 id="userEmail">user@example.com</h3>
                  <p>Premium Member</p>
                </div>
              </div>
              <button class="logout-btn" id="logoutBtn">Sign Out</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Audio Element -->
    <audio id="audioPlayer" preload="metadata"></audio>

    <!-- Loading Indicator -->
    <div class="loading-indicator" id="loadingIndicator">
      <div class="spinner"></div>
      <p>Loading...</p>
    </div>

    <!-- Toast Notifications -->
    <div class="toast-container" id="toastContainer"></div>
  </div>

  <script type="module" src="src/js/firebase-config.js"></script>
  <script type="module" src="src/js/firebase-service.js"></script>
  <script type="module" src="src/js/audio-player.js"></script>
  <script type="module" src="src/js/style-customizer.js"></script>
  <script type="module" src="src/js/auth-manager.js"></script>
  <script type="module" src="src/js/playlist-manager.js"></script>
  <script type="module" src="src/js/main.js"></script>
</body>
</html>